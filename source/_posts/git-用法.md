---
title: git ç”¨æ³•
date: 2021-07-15 22:59:22
tags: [git]
category: other
description: æ–°äººå…¥èŒä¸çŸ¥æ€ä¹ˆæ‹‰å–ä»“åº“ä»£ç ï¼Ÿä¸çŸ¥é“git fetch å’Œ git pullçš„åŒºåˆ«? åˆ°åº•æ˜¯ç”¨git mergeè¿˜æ˜¯git rebase? è¿™é‡Œæœ‰ä½ æƒ³è¦çš„ç­”æ¡ˆ
---

![](git-ç”¨æ³•/github.jpg)

## å‰è¨€

åˆ«äººä¸Šç­ï¼Œæˆ‘æ‘¸é±¼ï¼Œåˆ«äººåŠ ç­ï¼Œæˆ‘æ‘¸é±¼ï¼Œç„¶åå°±å†™å‡ºäº†è¿™ç¯‡ Git çš„ç®€å•ä½¿ç”¨æ•™ç¨‹ã€‚

æ‘¸æ‘¸ç´¢ç´¢ä¸€ä¸ªå¤šæœˆæ€»ç®—æ˜¯å®Œæˆäº†è¿™ç¯‡ git çš„å­¦ä¹ ç¬”è®° ğŸ˜‚ï¼Œ è¿˜å¥½æœ€åè¿˜æ˜¯åšæŒäº†ä¸‹æ¥ï¼Œå¯èƒ½æœ‰äº›æœ‰é—®é¢˜ï¼Œæ¬¢è¿å„ä½å¤§ä½¬æŒ‡æ­£ï¼Œå¯ä»¥é€šè¿‡æ[issue](https://github.com/yanxiaolazy/blog/issues)çš„æ–¹å¼ï¼Œæˆ–è€…å…³æ³¨æˆ‘çš„å…¬ä¼—å·, å¾®ä¿¡æœç´¢ **å‰ç«¯å…¥å‘æ‰‹å†Œ**ï¼Œåœ¨åå°ç»™æˆ‘ç•™è¨€ã€‚

## å‡†å¤‡

1. é¦–å…ˆéœ€è¦ç”Ÿæˆ ssh ç§˜é’¥ï¼Œ`ssh-keygen -t rsa -C "ä½ å…¬å¸å†…éƒ¨é‚®ç®±åœ°å€"` ï¼Œå¦‚æœæˆåŠŸï¼Œå°†ä¼šåœ¨`~/.ssh`æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆå¯¹åº”çš„ç§é’¥å’Œå…¬é’¥ã€‚
   `ls`

![](git-ç”¨æ³•/image-20210716095654977.png)

2. å¤åˆ¶`id_rsa.pub`æ–‡ä»¶çš„å†…å®¹ï¼ˆå¦‚æœæ˜¯ GitHubï¼‰åˆ°`setting -> SSH and GPG keys-> New SSH key` å¹¶ä¿å­˜

> è®°ä½æ”¾åˆ° GitHub ä¸Šçš„æ˜¯å…¬é’¥

3. å…¨å±€é…ç½®è´¦å·

   ```bash
   git config --global user.name "xxxx"
   git config --global user.email "xxxx"
   ```

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œå°±å¯ä»¥æ„‰å¿«çš„ pull æˆ– push ä»£ç äº†ã€‚å’Œ https æ‹‰å–æ–¹å¼ä¸åŒçš„æ˜¯ï¼Œhttps æ–¹å¼éœ€è¦æ¯æ¬¡æäº¤å‰éƒ½æ‰‹åŠ¨è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œssh çš„æ–¹å¼é…ç½®å®Œæ¯•å Git éƒ½ä¼šä½¿ç”¨ä½ æœ¬åœ°çš„ç§é’¥å’Œè¿œç¨‹ä»“åº“çš„å…¬é’¥è¿›è¡ŒéªŒè¯æ˜¯å¦æ˜¯ä¸€å¯¹ç§˜é’¥ï¼Œä»è€Œç®€åŒ–äº†æ“ä½œæµç¨‹ã€‚

## åŸºç¡€ç¯‡

â€‹ åˆå§‹åŒ–ä¸€ä¸ª git ä»“åº“ï¼Œä½¿ç”¨å‘½ä»¤`git init` ï¼Œä¼šåœ¨é¡¹ç›®ä¸‹ç”Ÿæˆä¸€ä¸ª.git çš„æ–‡ä»¶å¤¹ï¼Œè¿™å°±æ˜¯ Git çš„ç‰ˆæœ¬åº“

> å‰æƒ…æè¦ï¼šgit æœ‰å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¹‹åˆ†
>
> å·¥ä½œåŒºï¼šå°±æ˜¯æˆ‘ä»¬é¡¹ç›®æ‰€åœ¨çš„åŒºåŸŸ
>
> æš‚å­˜åŒºï¼šgit add æ“ä½œä¹‹åï¼Œå®é™…å°±æ˜¯å°†å·¥ä½œåŒºçš„å†…å®¹æ·»åŠ åˆ°æš‚å­˜åŒº

### git add

å°†å·¥ä½œåŒºçš„æ›´æ”¹ï¼Œæ·»åŠ åˆ°æš‚å­˜åŒº

```bash
# æ·»åŠ æŒ‡å®šæ–‡ä»¶ï¼Œåé¢å¯è·Ÿå¤šä¸ªæ–‡ä»¶ï¼Œä»¥ç©ºæ ¼åˆ†å¼€
git add <å…·ä½“çš„æ–‡ä»¶åæˆ–æŸä¸ªæ–‡ä»¶ä¸‹çš„æ‰€æœ‰å†…å®¹>
# æ·»åŠ é¡¹ç›®ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
git add .
```

### git commit

å°†æš‚å­˜åŒºçš„å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°ä»“åº“

```bash
# ä¼šæ‰“å¼€ä¸€ä¸ªå¯ç¼–è¾‘åŒºåŸŸ
git commit
# ç›´æ¥å°†å¤‡æ³¨æ·»åŠ åœ¨åé¢
git commit -m "xxxx"
# ç­‰ä»·äºgit add && git commit
git commit -am "xxxx"
# å¯¹æœ€è¿‘ä¸€æ¬¡çš„æäº¤ä¿¡æ¯è¿›è¡Œä¿®æ”¹ï¼Œä¼šæ›´æ”¹hashå€¼
git commit --amend
```

### git push <remote> <place>

å°†æœ¬åœ°åˆ†æ”¯å‘å¸ƒåˆ°è¿œç«¯åˆ†æ”¯

- å¸¸ç”¨å‘½ä»¤

```bash
# ä¸å¸¦å‚æ•°çš„pushã€‚æ³¨æ„ â€”â€” git push ä¸å¸¦ä»»ä½•å‚æ•°æ—¶çš„è¡Œä¸ºä¸ Git çš„ä¸€ä¸ªåä¸º push.default çš„é…ç½®æœ‰å…³
git push
# å°†æœ¬åœ°çš„devåˆ†æ”¯ï¼Œå‘å¸ƒåˆ°è¿œç«¯åŒåçš„devåˆ†æ”¯
git push origin dev
# å°†æœ¬åœ°å½“å‰åˆ†æ”¯ï¼Œå‘å¸ƒåˆ°è¿œç«¯ä¸æœ¬åœ°å½“å‰åˆ†æ”¯åŒåçš„åˆ†æ”¯ä¸Š
git push origin
```

- è¿›é˜¶å‘½ä»¤

æ ¼å¼ï¼š`git push origin <source>:<destination>`

> `source` å¯ä»¥æ˜¯ä»»ä½• Git èƒ½è¯†åˆ«çš„æ ¼å¼ï¼Œä¾‹å¦‚ï¼š`HEAD~2`ï¼Œ`foo^2`

```bash
# å°†æœ¬åœ°devåˆ†æ”¯ä¸Šçš„dev^å¤„å‘ç”Ÿçš„æ›´æ”¹æäº¤åˆ°è¿œç«¯åˆ†æ”¯feat
git push origin dev^:feat
```

### git pull <remote> <place>

æ‹‰å–è¿œç«¯æ›´æ–°åˆ†æ”¯åˆ°æœ¬åœ°

- å¸¸ç”¨å‘½ä»¤

```bash
# ä¸å¸¦å‚æ•°çš„pullã€‚ å°†è¿œç«¯originä¸Šçš„masterä¸Šçš„æ›´æ–°æ‹‰å–åˆ°æœ¬åœ°ï¼Œå¹¶ä¸æœ¬åœ°çš„masteråˆ†æ”¯è¿›è¡Œåˆå¹¶
git pull
git pull origin
```

- è¿›é˜¶å‘½ä»¤

åŒæ ·`git pull`ä¹Ÿå¯ä»¥ä½¿ç”¨`<source>:<destination>`æ ¼å¼
æ ¼å¼ï¼š`git pull origin <source>:<destination>`

> `source` å¯ä»¥æ˜¯ä»»ä½• Git èƒ½è¯†åˆ«çš„æ ¼å¼ï¼Œä¾‹å¦‚ï¼š`HEAD~2`ï¼Œ`foo^2`

```bash
# æ‹‰å–è¿œç«¯åˆ†æ”¯ä¸Šçš„æ›´æ–°å¹¶ä¸æœ¬åœ°çš„æŸä¸ªåˆ†æ”¯è¿›è¡Œåˆå¹¶
git pull origin master:dev
```

### git fetch

å°†è¿œç¨‹ä¸»æœºçš„æœ€æ–°å†…å®¹æ‹‰å–åˆ°æœ¬åœ°ï¼Œä½†ä¸ä¼šåˆå¹¶

```bash
# é»˜è®¤è¿œç¨‹ä¸»æœºæ˜¯origin
git fetch
# æ‹‰å–æ‰€æœ‰è¿œç¨‹ä¸»æœºä¸Šçš„æ›´æ–°ï¼Œé»˜è®¤æ˜¯origin
git fetch --all
# æ‹‰å–è¿œç¨‹ä¸»æœºoriginä¸Šdevåˆ†æ”¯æœ€æ–°çš„æ›´æ–°
git fetch origin dev
```

### git merge

å°†ä¸¤ä¸ªæˆ–å¤šä¸ªåˆ†æ”¯è¿›è¡Œåˆå¹¶ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„æäº¤è®°å½•ï¼Œä¿ç•™åˆå¹¶å†å²

```bash
# å‡è®¾åœ¨masteråˆ†æ”¯ï¼Œä»¥ä¸‹å‘½ä»¤ï¼Œå°±æ˜¯åœ¨è¯´ï¼Œå°†devåˆ†æ”¯åˆå¹¶åˆ°masterä¸Š
git merge dev
# -ff æŒ‡fast-forword, é»˜è®¤é‡‡ç”¨æ¨¡å¼ã€‚ä½¿ç”¨è¿™ç§æ¨¡å¼ï¼Œä¸ä¼šåˆ›å»ºæ–°çš„commitèŠ‚ç‚¹
git merge --ff -m "æ·»åŠ ä¸€äº›message"
# --no-ff fast-forwordæ¨¡å¼ä¸‹ï¼Œä»ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„commitèŠ‚ç‚¹ã€‚è¿™æ˜¯åˆå¹¶ä¸€ä¸ªtagæ—¶çš„é»˜è®¤è¡Œä¸º
git merge --no-ff -m "æ·»åŠ message"
```

> æ‰§è¡Œ`git pull`å‘½ä»¤ï¼Œå®é™…å°±æ˜¯`git fetch + git merge`

### git rebase

æ˜¯å¦ä¸€ä¸ªåˆå¹¶åˆ†æ”¯çš„å‘½ä»¤ï¼Œå…¶å®é™…ä¸Šå°±æ˜¯å–å‡ºä¸€ç³»åˆ—çš„æäº¤è®°å½•ï¼Œâ€å¤åˆ¶â€œå®ƒä»¬ï¼Œ ç„¶ååœ¨å¦å¤–ä¸€ä¸ªåœ°æ–¹ç€ä¸ªçš„æ”¾ä¸‹å»ã€‚

- åˆå¹¶åˆ†æ”¯

  ```bash
  # å½“å‰åˆ†æ”¯topic
  # 		A---B---C topic
  #	 /
  # D---E---F---G master
  #æ‰§è¡Œä»¥ä¸‹ä»»æ„ä¸€æ¡å‘½ä»¤
  git rebase master
  git rebase master topic
  # 								A'--B'--C' topic
  # 							/
  # D---E---F---G master
  ```

* `git rebase --abort`: `rebase`æ—¶ï¼Œå‘ç”Ÿå†²çªï¼Œå¯ä»¥ç”¨æ¥é˜»æ­¢`rebase`
* `git rebase --continue`: `rebase`æ—¶ï¼Œ è§£å†³äº†å†²çªåï¼Œç”¨æ¥ç»§ç»­`rebase`
* `git rebase -i`: åˆå¹¶å¤šä¸ª`commit` è®°å½•
* `git pull --rebase = git fetch + git rebase`

### git checkout

è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‘½ä»¤ï¼Œå¯ä»¥åšå¾ˆå¤šäº‹

- åˆ›å»ºæ–°çš„åˆ†æ”¯

  `git checkout -b dev` : åŸºäºå½“å‰åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„`dev`åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°`dev`åˆ†æ”¯

  `git checkout -b dev master`: åŸºäº`master`åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„`dev`åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°`dev`åˆ†æ”¯

  > ç­‰ä»·äº`git branch -b dev`

- `git checkout dev`: åˆ‡æ¢åˆ†æ”¯ï¼Œ åˆ‡æ¢åˆ°`dev`åˆ†æ”¯

  > ç­‰ä»·äº`git branch dev`

- `git checkout <file>`: ï¼ˆ`file`å¯ä»¥æ˜¯ä¸ª"ç‚¹", è¡¨ç¤ºæ’¤é”€æ‰€æœ‰æ–‡ä»¶çš„æ›´æ”¹ï¼‰æ’¤é”€å·¥ä½œåŒºä¸­çš„æŒ‡å®šæ›´æ”¹ï¼Œä¸åŒ…å«æœªè¢«`git`ç›‘æ§çš„æ–‡ä»¶

  > ç­‰ä»·äº`git restore <file> `
  >
  > å¦‚æœéœ€è¦æ’¤é”€æš‚å­˜åŒºçš„æ›´æ”¹ï¼Œå¯ä»¥ä½¿ç”¨`git restore --staged <file>`

### git cherry-pick

å¦‚æœä½ åªéœ€è¦æŸä¸ªåˆ†æ”¯çš„éƒ¨åˆ†æäº¤ä»£ç ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™æ¡å‘½ä»¤

- `git cherry-pick <commit>`

```bash
# å½“å‰åˆ†æ”¯ master (ä»¥ä¸‹å­—æ¯ä»£è¡¨commit hash)
# 			e - f - g dev
# 		/
# a - b - c - d master
# å€˜è‹¥masteråˆ†æ”¯åªéœ€è¦devåˆ†æ”¯ä¸Šçš„æœ¬åˆ†æäº¤, å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç 
git cherry-pick e...f
# 			e - f - g dev
# 		/
# a - b - c - d - e' - f' master
```

- `git cherry-pick <branch>` : å‘½ä»¤çš„å‚æ•°ï¼Œä¸ä¸€å®šæ˜¯æäº¤çš„å“ˆå¸Œå€¼ï¼Œåˆ†æ”¯åä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œè¡¨ç¤ºè½¬ç§»è¯¥åˆ†æ”¯çš„æœ€æ–°æäº¤ã€‚
- `git cherry-pick --abort`: å‘ç”Ÿä»£ç å†²çªæ—¶ï¼Œå¯ä»¥é˜»æ­¢åˆå¹¶ä»£ç ï¼Œå›åˆ°æ“ä½œå‰çš„æ ·å­
- `git cherry-pick --continue`: è§£å†³ä»£ç å†²çªåï¼Œç»§ç»­è¿›è¡Œ`cherry-pick` å‘½ä»¤
- `git cherry-pick --quite` : å‘ç”Ÿä»£ç å†²çªåï¼Œå¯ä»¥é˜»æ­¢åˆå¹¶ä»£ç ï¼Œä½†æ˜¯ä¸ä¼šå›åˆ°æ“ä½œå‰çš„æ ·å­

## å…¶ä»–å‘½ä»¤

### git branch

ç”¨äºåˆ†æ”¯ç®¡ç†çš„å‘½ä»¤

```bash
# åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯
git branch
# åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼Œå¹¶å¸¦ä¸Šæœ€è¿›ä¸€æ¬¡çš„commitè®°å½•
git branch -v
# åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯dev
git branch dev
# åˆ é™¤devåˆ†æ”¯
git branch -d dev
# git branch --delete --forceçš„ç®€å†™ï¼Œç”¨äºå¼ºåˆ¶åˆ é™¤
git branch -D dev
# åŸºäºå½“å‰åˆ†æ”¯å¤åˆ¶ä¸€ä¸ªæ–°çš„åˆ†æ”¯branch-copy
git branch -c branch-copy
# åŸºäºdevåˆ†æ”¯å¤åˆ¶ä¸€ä¸ªæ–°çš„åˆ†æ”¯dev-copy
git branch -c dev dev-copy
```

### git stash

å°†æœ¬åœ°çš„æ›´æ”¹æš‚å­˜ã€‚

å½“æœ¬åœ°å‘ç”Ÿæ›´æ”¹ï¼Œä½†è¿˜æœª`commit`, åˆè¦è¿›è¡Œå…¶ä»–æ“ä½œ( å¦‚æ›´æ–°è¿œç«¯æœ€æ–°ä»£ç  )ï¼Œå¦‚æœç›´æ¥`git pull`æˆ–`git pull --rebase` ä¼šæŠ¥é”™ï¼Œè¿™æ—¶ï¼Œå°±éœ€è¦æˆ‘ä»¬å…ˆå°†æ›´æ”¹æš‚å­˜ã€‚

```bash
# å°†æ›´æ”¹æš‚å­˜èµ·æ¥
git stash
# ä¹Ÿå¯ä»¥åœ¨æš‚å­˜æ—¶ï¼Œæ·»åŠ å¤‡æ³¨
git stash -m "æš‚å­˜"
# æŸ¥çœ‹stashäº†å“ªäº›
git stash list
# å–å‡ºæœ€è¿‘çš„ä¸€æ¬¡stash, å¹¶åˆ é™¤è®°å½•
git stash pop
# å–å‡ºæŒ‡å®šçš„stashè®°å½•, ä¸ä¼šåˆ é™¤
git stash list
git stash apply <å‰é¢list åˆ—å‡ºçš„æŸä¸€é¡¹>
# åˆ é™¤æ‰€æœ‰çš„stash
git stash clear
# åˆ é™¤æŒ‡å®šçš„ä¸€æ¬¡stash
git stash drop <stash è®°å½•>
```

> å¦‚æœéœ€è¦æš‚å­˜è¿˜æœªè¢«`git`è·Ÿè¸ªçš„æ–‡ä»¶ï¼Œå¯ä»¥å…ˆ`git add` åå†`git stash`

### git reset

ç‰ˆæœ¬å›é€€ï¼Œå¦‚æœæ˜¯è¿˜æœªæäº¤åˆ°è¿œç«¯ä»“åº“ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨`git reset` å›é€€ï¼Œå¦‚æœå·²ç»æäº¤åˆ™éœ€è¦ä¸‹é¢æåˆ°çš„`git revert`

```bash
# å›é€€ä¸€ä¸ªcommit
git reset HEAD^
# å‘åå›é€€ä¸¤ä¸ªcommit, å¹¶ä¸”ä¸¢å¤±å›é€€åçš„æ‰€æœ‰commitæ•°æ®
git reset --hard HEAD~2
```

### git revert

ç‰ˆæœ¬å›é€€ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„`commit`è®°å½•ã€‚

```bash
# æ’¤é”€æœ€æ–°çš„commit
git revert HEAD
```

## å‚è€ƒ

[1] https://juejin.cn/post/6974184935804534815?share_token=e6867a4f-d921-469d-84e2-e4a3e1810d0f

[2] https://learngitbranching.js.org/?locale=zh_CN

[3] https://www.liaoxuefeng.com/wiki/896043488029600)

[4] https://www.cnblogs.com/hujunzheng/p/9732936.html

[5] https://www.ruanyifeng.com/blog/2020/04/git-cherry-pick.html

###
